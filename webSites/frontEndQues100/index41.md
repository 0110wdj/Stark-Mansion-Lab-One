## 41 下面代码输出什么

```js
var a = 10;
(function () {
  var a;
  console.log(a); //undefined
  a = 5;
  console.log(globalThis.a); // 10
  console.log(a); //20
})();
```

## 42 实现一个 sleep 函数

比如 sleep(1000) 意味着等待 1000 毫秒，可从 Promise、Generator、Async/Await 等角度实现

## 43 使用 sort() 对数组 [3, 15, 8, 29, 102, 22] 进行排序，输出结果

> [3, 15, 8, 29, 102, 22].sort() // [ 102, 15, 22, 29, 3, 8 ]

> 根据 MDN 上对 Array.sort()的解释，默认的排序方法会将数组元素转换为字符串，然后比较字符串中字符的 UTF-16 编码顺序来进行排序。所以'102' 会排在 '15' 前面。

## 44 介绍 HTTPS 握手过程

- 1 客户端使用 https 的 url 访问 web 服务器,要求与服务器建立 ssl 连接
- 2 web 服务器收到客户端请求后, 会将网站的证书(包含公钥)传送一份给客户端
- 3 客户端收到网站证书后会检查证书的颁发机构以及过期时间, 如果没有问题就随机产生一个秘钥
- 4 客户端利用公钥将会话秘钥加密, 并传送给服务端, 服务端利用自己的私钥解密出会话秘钥
- 5 之后服务器与客户端使用秘钥加密传输

## 45 HTTPS 握手过程中，客户端如何验证证书的合法性

参考资料：

- 1 是否是信任的有效证书，浏览器内置了信任的根证书，看看 web 服务器上的证书是不是这些信任的根证书发的或者信任根的二级证书机构发的，还有是否过了有效期，是否被吊销；
- 2 证明对方是否持有证书的对应的私钥

参考资料：

- 1 校验证书的颁发机构是否受客户端信任。
- 2 通过 CRL 或 OCSP 的方式校验证书是否被吊销。
- 3 对比系统时间，校验证书是否在有效期内。
- 4 通过校验对方是否存在证书的私钥，判断证书的网站域名是否与证书颁发的域名一致。